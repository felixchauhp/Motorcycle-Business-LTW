<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/2.0.0/uicons-regular-straight/css/uicons-regular-straight.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="./assets/css/styles.css" />

    <title>Ecommerce Website</title>
    <style>
        .add-product-btn {
            display: flex;
            justify-content: flex-start;
            margin-bottom: 20px;
        }
        .add-product-btn .button {
            background-color: var(--first-color);
            color: white;
            font-size: 16px;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
        }

        .add-product-btn .button:hover {
            background-color: #054c2a;
        }

        .product-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .product-table th, .product-table td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }

        .product-table th {
            background-color: #e0e0e0;
            font-weight: bold;
        }

        .product-button {
            color: white;
            background-color: var(--first-color);
            padding: 5px 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            margin: 0 5px;
        }

        .product-button:hover {
            background-color: #054c2a;
        }

        .pagination {
    list-style: none;
    display: flex;
    justify-content: center; /* Căn giữa toàn bộ phân trang */
    margin-top: 20px;
}

.pagination__link {
    margin: 0 5px; /* Khoảng cách giữa các liên kết */
    padding: 10px 15px; /* Padding cho mỗi ô */
    border: 1px solid #ccc; /* Viền cho mỗi ô */
    cursor: pointer; /* Con trỏ khi hover */
    color: #000; /* Màu chữ */
    text-align: center; /* Căn giữa văn bản trong ô */
    border-radius: 4px; /* Bo góc cho các ô */
    display: flex; /* Thay đổi để sử dụng Flexbox */
    align-items: center; /* Căn giữa theo chiều dọc */
    justify-content: center; /* Căn giữa theo chiều ngang */
}

.pagination__link.active {
    background-color: var(--first-color); /* Màu nền cho ô đang hoạt động */
    color: white; /* Màu chữ cho ô đang hoạt động */
}

.pagination__link:hover {
    background-color: #e0e0e0; /* Nền khi di chuột */
}

    

        
        
       /* Modal styles */
       #productForm {
        width: 100%; /* Chiếm toàn bộ chiều rộng */
        max-width: 600px; /* Giới hạn chiều rộng tối đa */
        padding: 20px; /* Khoảng cách bên trong */
        border: 1px solid #ccc; /* Viền cho form */
        border-radius: 8px; /* Bo góc cho form */
        background-color: #fff; /* Màu nền */
        overflow: auto; /* Thêm cuộn nếu cần thiết, nhưng tối thiểu */
      }
        .overlay {
    display: none; /* ẩn mặc định */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5); /* nền bán trong suốt */
    z-index: 1000; /* nằm trên các nội dung khác */
}

.modal {
    display: none; /* ẩn mặc định */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* căn giữa modal */
    z-index: 1001; /* nằm trên overlay */
    max-height: 90vh; /* giới hạn chiều cao */
    overflow-y: auto; /* cho phép cuộn */
    background: white; /* màu nền của modal */
    padding: 20px; /* một chút padding */
}



        
        #productForm h2 {
            margin-top: 0;
        }
        
        #productForm label {
            display: block;
            margin-bottom: 10px;
        }
        
        #productForm input[type="text"],
        #productForm input[type="number"],
        #productForm input[type="file"],
        #productForm textarea,
        #productForm select {
            width: 100%;
            padding: 6px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 15px;
            box-sizing: border-box; /* Bao gồm padding và border trong kích thước */
        }
        
        #product-info {
            height: 100px; /* Chiều cao cố định cho textarea */
            resize: none; /* Ngăn người dùng thay đổi kích thước */
        }
        #product-note {
            height: 100px; /* Chiều cao cố định cho textarea */
            resize: none; /* Ngăn người dùng thay đổi kích thước */
        }
        
        #product-prices {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        #product-prices div {
            flex: 1; /* Chiếm đều không gian */
            margin-right: 10px; /* Khoảng cách giữa các cột */
        }
        
        #product-prices div:last-child {
            margin-right: 0; /* Không có margin cho cột cuối cùng */
        }
        
        #product-dates {
            display: flex;
            gap: 45px;
            margin-bottom: 15px;
        }
        
        #product-dates input[type="date"] {
            width: 100%; /* Chiếm toàn bộ chiều rộng của ô chứa */
            padding: 6px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin: 0; /* Không có margin */
        }
        
        #productForm button[type="submit"] {
            background-color: var(--first-color);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        #productForm button[type="submit"]:hover {
            background-color: #054c2a;
        }

        #image-upload-area {
            display: flex; /* Use flexbox for alignment */
            align-items: center; /* Center items vertically */
            gap: 10px; /* Space between the button and image previews */
        }

        #image-preview {
            display: flex; 
            flex-wrap: wrap; 
            gap: 10px; /* Space between images */
        }

        #image-preview img {
            width: 100px; /* Set the width of the thumbnails */
            height: auto; /* Maintain aspect ratio */
            border-radius: 4px; /* Rounded corners for images */
            border: 1px solid #ccc; /* Optional: add a border to images */
        }

        .form-navigation {
    background-color: #f5f5f5; /* Change this as needed */
    color: #333; /* Change text color as needed */
}

/* Optionally, hide the original navigation items */
.form-navigation .nav__item {
    display: none; /* Hide original items */
}

.form-navigation .form-nav__item {
    display: block; /* Show form-specific items */
}
.search-container {
    display: flex; /* Sử dụng Flexbox để căn chỉnh các phần tử */
    align-items: center; /* Căn giữa theo chiều dọc */
    gap: 10px; /* Khoảng cách giữa các phần tử */
}

#search-input,
#filter-input {
    padding: 5px; /* Khoảng cách bên trong cho ô tìm kiếm và ô lọc */
    border: 1px solid #ccc; /* Viền cho ô tìm kiếm và ô lọc */
    border-radius: 4px; /* Bo góc cho ô tìm kiếm và ô lọc */
    flex: 1; /* Chiếm hết không gian còn lại */
}

#apply-button {
    border: 2px solid red; /* Khung viền đỏ */
    background-color: transparent; /* Không có màu nền */
    color: red; /* Chữ màu đỏ */
    padding: 5px 10px; /* Khoảng cách bên trong */
    cursor: pointer; /* Con trỏ chuột khi di chuột qua */
}

#reset-button {
    background-color: black; /* Màu nền đen */
    color: white; /* Chữ màu trắng */
    margin-left: 10px; /* Khoảng cách giữa hai nút */
    padding: 5px 10px; /* Khoảng cách bên trong */
    cursor: pointer; /* Con trỏ chuột khi di chuột qua */
}





    </style>
</head>
<body>
    
    <nav class="nav container">
        <a href="index-manage.html" class="nav__logo">
            <img class="nav__logo-img" src="assets/img/logo.png" alt="website logo" />
        </a>
        <div class="nav__menu" id="nav-menu">
            <div class="nav__menu-top">
                <a href="index-manage.html" class="nav__menu-logo">
                    <img src="./assets/img/logo.png" alt="">
                </a>
                <div class="nav__close" id="nav-close">
                    <i class="fi fi-rs-cross-small"></i>
                </div>
            </div>
            <ul class="nav__list">
                <li class="nav__item"><a href="productManage.html" class="nav__link">Quản lý Sản phẩm</a></li>
                <li class="nav__item"><a href="quanlydonhang.html" class="nav__link">Quản lý Đơn hàng</a></li>
                <li class="nav__item"><a href="discount.html" class="nav__link active-link">Quản lý khuyến mãi</a></li>
                <li class="nav__item"><a href="accounts-manager.html" class="nav__link">Thông tin</a></li>
            </ul>
        </div>
    </nav>

    <main class="main">
        <section class="products container section--lg">
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Tìm kiếm...">
                <input type="text" id="filter-input" placeholder="Lọc..."> <!-- Ô lọc -->
                <button id="apply-button">Áp dụng</button>
                <button id="reset-button">Nhập lại</button>
            </div>
            
            <br>
            
          <div class="add-product-btn">
            <a href="add-Product.html" class="button"><i class="fi fi-rs-plus"></i> Thêm 1 sản phẩm mới</a>
        </div>

            <table class="product-table">
                <thead>
                    <tr>
                      <th>Ảnh</th>
                      <th>Mã</th>
                      <th>Tên</th>
                      <th>Giá gốc</th>
                      <th>Giá bán</th>
                      <th>Tồn kho</th>
                      <th>Ghi chú</th>
                      <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody id="product-table-body">
                    <!-- Sẽ được điền bằng JavaScript -->
                </tbody>
            </table>
            <ul class="pagination" id="pagination">
                <!-- Sẽ được điền bằng JavaScript -->
            </ul>
        </section>
        <div id="overlay" class="overlay"></div>
    <div id="productForm" class="modal">
      <h2 style="text-align: center;">Chỉnh sửa thông tin sản phẩm</h2>
      <br>
      <form id="save-product">
          <label for="product-id">Mã sản phẩm:</label>
          <input type="text" id="product-id" required />

          <label for="product-name">Tên sản phẩm:</label>
          <input type="text" id="product-name" required />

          <label for="product-supplier">Nhà cung cấp:</label>
          <input type="text" id="product-supplier" required />
    
           <label for="product-des">Mô tả:</label>
            <textarea id="product-info" required></textarea>

          <label for="product-function">Công dụng:</label>
          <input type="text" id="product-function" required />
    
          <label for="product-quantity">Tồn kho:</label>
          <input type="number" id="product-quantity" required />
          
          <label for="product-unit">Đơn vị tính:</label>
          <input type="text" id="product-unit" required />
    
          <div id="product-prices">
              <div>
                  <label for="product-original-price">Giá gốc:</label>
                  <input type="number" id="product-original-price" required />
              </div>
              <div>
                  <label for="product-price">Giá bán:</label>
                  <input type="number" id="product-price" required />
              </div>
          </div>

          <div id="product-dates">
              <div>
                  <label for="product-discount-price">Giá khuyến mãi:</label>
                  <input type="number" id="product-discount-price" required />
              </div>
              <div>
                  <label for="product-start-date">Ngày bắt đầu:</label>
                  <input type="date" id="product-start-date" required />
              </div>
              <div>
                  <label for="product-end-date">Ngày kết thúc:</label>
                  <input type="date" id="product-end-date" required />
              </div>
          </div>
          
          <label for="product-image">Ảnh sản phẩm (tối đa 2):</label>
            <div id="image-upload-container" style="border: 1px solid #ccc; padding: 10px; border-radius: 8px; display: flex; align-items: center; gap: 10px;">
                <input type="file" id="product-image" accept="image/*" multiple required style="display: none;" />
                <label for="product-image" style="cursor: pointer; padding: 10px; background-color: #f0f0f0; border-radius: 8px;">
                    Chọn ảnh
                </label>
                <div id="image-preview" style="display: flex; flex-wrap: nowrap; gap: 10px;"></div> <!-- Preview container for images -->
            </div>

          <label for="product-note">Ghi chú:</label>
          <textarea id="product-note" required></textarea>

          <button type="submit">Lưu</button>
      </form>
  </div>
  


<script>
const fileInput = document.getElementById('product-image');
const imagePreview = document.getElementById('image-preview');

// Array to keep track of selected image files
let selectedFiles = [];

fileInput.addEventListener('change', function() {
    const files = Array.from(fileInput.files);

    if (files.length + selectedFiles.length > 2) {
        alert('Bạn chỉ được chọn tối đa 2 hình ảnh.');
        fileInput.value = '';
        return;
    }

    selectedFiles = selectedFiles.concat(files);
    imagePreview.innerHTML = '';

    selectedFiles.forEach((file, index) => {
        const reader = new FileReader();
        reader.onload = function(e) {
            const imgWrapper = document.createElement('div');
            imgWrapper.style.position = 'relative';

            const img = document.createElement('img');
            img.src = e.target.result;
            img.style.width = '200px';
            img.style.height = 'auto';
            img.style.borderRadius = '4px';
            img.style.border = '1px solid #ccc';
            img.style.objectFit = 'cover';

            const deleteIcon = document.createElement('span');
            deleteIcon.innerHTML = '<i class="fi fi-rs-trash"></i>';
            deleteIcon.style.position = 'absolute';
            deleteIcon.style.top = '5px';
            deleteIcon.style.right = '5px';
            deleteIcon.style.cursor = 'pointer';
            deleteIcon.style.display = 'none';
            deleteIcon.style.opacity = '0.7';
            deleteIcon.style.fontSize = '20px';

            imgWrapper.addEventListener('mouseenter', () => {
                deleteIcon.style.display = 'block';
            });
            imgWrapper.addEventListener('mouseleave', () => {
                deleteIcon.style.display = 'none';
            });

            // Cập nhật hình ảnh sản phẩm
            const currentProductId = document.getElementById('product-id').value; // Lấy ID sản phẩm hiện tại
            updateProductImage(currentProductId, e.target.result); // Cập nhật hình ảnh mới

            deleteIcon.addEventListener('click', () => {
                selectedFiles.splice(index, 1);
                imgWrapper.remove();
                updateImagePreviews();
                updateProductImage(currentProductId, ''); // Xóa hình ảnh khỏi sản phẩm
            });

            imgWrapper.appendChild(img);
            imgWrapper.appendChild(deleteIcon);
            imagePreview.appendChild(imgWrapper);
        };
        reader.readAsDataURL(file);
    });
});


// Function to update the image previews after deletion
function updateImagePreviews() {
imagePreview.innerHTML = ''; // Clear the current previews
selectedFiles.forEach((file, index) => {
    const reader = new FileReader();
    reader.onload = function(e) {
        const imgWrapper = document.createElement('div');
        imgWrapper.style.position = 'relative'; // Set position for the icon

        const img = document.createElement('img');
        img.src = e.target.result; // Set the image source to the file's data URL
        img.style.width = '200px'; // Thay đổi kích thước của hình ảnh ở đây
        img.style.height = 'auto'; // Maintain aspect ratio
        img.style.borderRadius = '4px'; // Optional: rounded corners for images
        img.style.border = '1px solid #ccc'; // Optional: border for images
        img.style.objectFit = 'cover'; // Ensure images fit well within their boxes

        const deleteIcon = document.createElement('span');
        deleteIcon.innerHTML = '<i class="fi fi-rs-trash"></i>';
        deleteIcon.style.position = 'absolute';
        deleteIcon.style.top = '5px';
        deleteIcon.style.right = '5px';
        deleteIcon.style.cursor = 'pointer';
        deleteIcon.style.display = 'none'; // Initially hidden
        deleteIcon.style.opacity = '0.7'; // Slightly transparent
        deleteIcon.style.fontSize = '20px'; // Adjust the icon size if needed

        imgWrapper.addEventListener('mouseenter', () => {
            deleteIcon.style.display = 'block'; // Show icon on hover
        });
        imgWrapper.addEventListener('mouseleave', () => {
            deleteIcon.style.display = 'none'; // Hide icon when not hovering
        });

        deleteIcon.addEventListener('click', () => {
            selectedFiles.splice(index, 1); // Remove file from array
            imgWrapper.remove(); // Remove the image element
            updateImagePreviews(); // Update the preview display
        });

        imgWrapper.appendChild(img); // Add the image to the wrapper
        imgWrapper.appendChild(deleteIcon); // Add the delete icon to the wrapper
        imagePreview.appendChild(imgWrapper); // Add the wrapper to the preview container
    }
    reader.readAsDataURL(file); // Read the file as a data URL
});
}


</script>
<script>
    function validateForm() {
        const fileInput = document.getElementById('product-image');
        if (fileInput.files.length > 2) {
            alert('Bạn chỉ được chọn tối đa 2 hình ảnh.');
            return false;
        }
        return true;
    }
</script>
    </main>
    

   
    
    <!--=============== FOOTER ===============-->
    <footer class="footer container">
      <div class="footer__container grid">
        <div class="footer__content">
          <a href="index.html" class="footer__logo">
            <img src="./assets/img/logo.png" alt="" class="footer__logo-img" />
          </a>
          <h4 class="footer__subtitle">Thông tin liên hệ</h4>
          <p class="footer__description">
            <span>Địa chỉ:</span> Công ty CP-TM-DV Xe Gắn Máy, 100 phường Đông Hòa, TP. Dĩ An, tỉnh Bình Dương, Việt Nam.
          </p>
          <p class="footer__description">
            <span>Hotline:</span> +84 001 929 992
          </p>
          <p class="footer__description">
            <span>Email:</span> contact@motorcycle.vn
          </p>
          <div class="footer__social">
            <h4 class="footer__subtitle">MotorCycle đã có mặt trên:</h4>
            <div class="footer__links flex">
              <a href="#">
                <img
                  src="./assets/img/icon-facebook.svg"
                  alt=""
                  class="footer__social-icon"
                />
              </a>
              <a href="#">
                <img
                  src="./assets/img/icon-twitter.svg"
                  alt=""
                  class="footer__social-icon"
                />
              </a>
              <a href="#">
                <img
                  src="./assets/img/icon-instagram.svg"
                  alt=""
                  class="footer__social-icon"
                />
              </a>
              <a href="#">
                <img
                  src="./assets/img/icon-pinterest.svg"
                  alt=""
                  class="footer__social-icon"
                />
              </a>
              <a href="#">
                <img
                  src="./assets/img/icon-youtube.svg"
                  alt=""
                  class="footer__social-icon"
                />
              </a>
            </div>
          </div>
        </div>
        <div class="footer__content">
          <h3 class="footer__title">Thông tin chi tiết</h3>
          <ul class="footer__links">
            <li><a href="#" class="footer__link">Về chúng tôi</a></li>
            <li><a href="shipping-policy.html" class="footer__link">Chính sách giao hàng</a></li>
            <li><a href="paying-policy.html" class="footer__link">Chính sách thanh toán</a></li>
            <li><a href="#" class="footer__link">Điều khoản bảo mật</a></li>
            <li><a href="#" class="footer__link">Quy định cung cấp dịch vụ</a></li>
          </ul>
        </div>
        <div class="footer__content">
          <h3 class="footer__title">Tải khoản của tôi</h3>
          <ul class="footer__links">
            <li><a href="#" class="footer__link">Đăng nhập</a></li>
            <li><a href="#" class="footer__link">Xem giỏ hàng</a></li>
            <li><a href="#" class="footer__link">Danh sách sản phẩm yêu thích</a></li>
            <li><a href="#" class="footer__link">Tra cứu đơn hàng</a></li>
          </ul>
        </div>
        <div class="footer__content">
          <h3 class="footer__title">Đối tác thanh toán</h3>
          <img
            src="./assets/img/payment-method.png"
            alt=""
            class="payment__img"
          />
        </div>
      </div>
      <div class="footer__bottom">
        <p class="copyright">&copy; 2024. All right reserved</p>
        <span class="designer">Website created by Group 4</span>
      </div>
    </footer>

    <!--=============== SWIPER JS ===============-->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
      const products = [];
  
      // Create sample product data
      for (let i = 1; i <= 100; i++) {
          products.push({
              id: `SP${100 + i}`,
              name: `Sản phẩm ${i}`,
              originalPrice: `$${(Math.random() * 1000).toFixed(2)}`,
              salePrice: `$${(Math.random() * 500).toFixed(2)}`,
              stock: Math.floor(Math.random() * 100) + 1,
              image: `assets/img/product-${i}-1.jpg`,
              notes: `Note ${i}`
          });
      }
  
      console.log("Products array:", products); // Check if the products array has been populated
  
      const itemsPerPage = 20;
      let currentPage = 1;
  
      // Render products for the current page
      function renderProducts(page) {
          const startIndex = (page - 1) * itemsPerPage;
          const endIndex = startIndex + itemsPerPage;
          const productTableBody = document.getElementById('product-table-body');
  
          if (!productTableBody) {
              console.error("Element with ID 'product-table-body' not found");
              return;
          }
  
          productTableBody.innerHTML = '';
  
          const currentProducts = products.slice(startIndex, endIndex);
          currentProducts.forEach(product => {
              productTableBody.innerHTML += createProductRow(product);
          });
  
          renderPagination();
      }
  
      // Create a row for the product table
      function createProductRow(product) {
          return `
              <tr>
                  <td><img src="${product.image}" alt="${product.name}" style="width: 100px; height: auto;" /></td>
                  <td>${product.id}</td>
                  <td>${product.name}</td>
                  <td>${product.originalPrice}</td>
                  <td>${product.salePrice}</td>
                  <td>${product.stock}</td>
                  <td>${product.notes}</td>
                  <td>
                      <button class="product-button" onclick="editProduct('${product.id}', event)">
        <i class="fi fi-rs-edit"></i>
                      <button class="product-button" onclick="deleteProduct('${product.id}')">
                          <i class="fi fi-rs-trash"></i>
                      </button>
                      <button class="product-button" onclick="goToDetail('${product.id}')">
                          <i class="fi fi-rs-menu-dots"></i>
                      </button>
                  </td>
              </tr>
          `;
      }
  
      // Render pagination controls
      function renderPagination() {
          const pagination = document.getElementById('pagination');
          pagination.innerHTML = '';
  
          const totalPages = Math.ceil(products.length / itemsPerPage);
          for (let i = 1; i <= totalPages; i++) {
              const pageItem = document.createElement('li');
              pageItem.innerHTML = `<a href="#" class="pagination__link ${currentPage === i ? 'active' : ''}" onclick="goToPage(${i})">${i}</a>`;
              pagination.appendChild(pageItem);
          }
      }
  
      // Go to the selected page
      function goToPage(page) {
          currentPage = page;
          renderProducts(currentPage);
      }
  
      // Redirect to product detail page
      function goToDetail(productId) {
          window.location.href = `details.html?id=${productId}`;
      }
  
      // Delete a product
      function deleteProduct(productId) {
          const productIndex = products.findIndex(product => product.id === productId);
          if (productIndex > -1) {
              products.splice(productIndex, 1);
              renderProducts(currentPage);
          }
      }
  

function editProduct(productId, event) {
    event.preventDefault(); // Prevent default link behavior
    const productData = products.find(product => product.id === productId);
    if (!productData) {
        alert('Product not found');
        return;
    }

    // Populate the form fields
    document.getElementById('product-id').value = productData.id;
    document.getElementById('product-name').value = productData.name;
    document.getElementById('product-note').value = productData.notes;
    document.getElementById('product-quantity').value = productData.stock;
    document.getElementById('product-original-price').value = productData.originalPrice.replace('$', '');
    document.getElementById('product-price').value = productData.salePrice.replace('$', '');

    // Show modal and overlay
    toggleModalVisibility(true);
    document.querySelector('.nav').classList.add('form-navigation');
}

// Toggle modal visibility
function toggleModalVisibility(isVisible) {
    const productForm = document.getElementById('productForm');
    productForm.style.display = isVisible ? 'block' : 'none';
    document.getElementById('overlay').style.display = isVisible ? 'block' : 'none';

    // Cuộn đến form nếu nó đang được hiển thị
    if (isVisible) {
        setTimeout(() => {
            productForm.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 100); // Một chút độ trễ để đảm bảo modal được hiển thị hoàn toàn
    }
}


  
      // Close modal
      function closeModal() {
          toggleModalVisibility(false);
          document.querySelector('.nav').classList.remove('form-navigation');
      }
  
      // Update product data
      function updateProduct(productId, productData) {
          const productIndex = products.findIndex(product => product.id === productId);
          if (productIndex > -1) {
              products[productIndex] = { ...products[productIndex], ...productData };
              renderProducts(currentPage);
          }
      }


      function updateProductImage(productId, newImage) {
    const productIndex = products.findIndex(product => product.id === productId);
    if (productIndex > -1) {
        products[productIndex].image = newImage; // Cập nhật đường dẫn hình ảnh mới
        renderProducts(currentPage); // Cập nhật lại bảng sản phẩm
    }
}

  
      // Handle form submission
      document.getElementById('save-product').addEventListener('submit', function (event) {
          event.preventDefault();
  
          const productId = document.getElementById('product-id').value;
          const productData = {
              name: document.getElementById('product-name').value,
              notes: document.getElementById('product-note').value,
              stock: parseInt(document.getElementById('product-quantity').value, 10),
              salePrice: `$${document.getElementById('product-price').value}`,
              originalPrice: `$${document.getElementById('product-original-price').value}`
          };
  
          updateProduct(productId, productData);
          closeModal();
      });
  
      

      // Close modal when overlay is clicked
      document.getElementById('overlay').addEventListener('click', closeModal);
  
      // Initialize first page render
      document.addEventListener('DOMContentLoaded', function () {
          renderProducts(currentPage);
      });
      document.getElementById('apply-button').addEventListener('click', function() {
    const searchValue = document.getElementById('search-input').value.toLowerCase(); // Lấy giá trị tìm kiếm và chuyển thành chữ thường
    const rows = document.querySelectorAll('#product-table-body tr'); // Lấy tất cả các hàng trong bảng

    // Lưu trữ kết quả tìm kiếm
    const results = [];

    // Duyệt qua tất cả các hàng
    rows.forEach(row => {
        const cells = row.querySelectorAll('td'); // Lấy tất cả các ô trong hàng
        let rowMatches = false; // Biến để kiểm tra xem hàng có khớp với tìm kiếm hay không

        // Duyệt qua các ô trong hàng
        cells.forEach(cell => {
            if (cell.textContent.toLowerCase().includes(searchValue)) { // Kiểm tra xem giá trị tìm kiếm có trong ô không
                rowMatches = true; // Nếu có, đánh dấu hàng này là khớp
            }
        });

        if (rowMatches) {
            results.push(row); // Nếu hàng khớp, thêm vào kết quả
        }
    });

    // Xóa bảng hiện tại và in ra kết quả
    const productTableBody = document.getElementById('product-table-body');
    productTableBody.innerHTML = ''; // Xóa tất cả hàng cũ

    // Nếu có kết quả tìm kiếm, hiển thị chúng
    if (results.length > 0) {
        results.forEach(resultRow => {
            productTableBody.appendChild(resultRow); // Thêm hàng khớp vào bảng
        });
    } else {
        productTableBody.innerHTML = '<tr><td colspan="8">Không tìm thấy sản phẩm nào.</td></tr>'; // Hiển thị thông báo nếu không tìm thấy
    }
});
// Thêm sự kiện lắng nghe cho nút "Áp dụng"
document.getElementById('apply-button').addEventListener('click', function() {
    const searchInput = document.getElementById('search-input').value.toLowerCase(); // Giá trị tìm kiếm
    const filterInput = document.getElementById('filter-input').value.toLowerCase(); // Giá trị lọc
    const productTableBody = document.getElementById('product-table-body'); // Lấy bảng sản phẩm

    // Lọc dữ liệu và hiển thị
    productTableBody.innerHTML = ''; // Xóa nội dung cũ trong bảng

    const filteredProducts = products.filter(product => {
        const matchesSearch = product.name.toLowerCase().includes(searchInput); // Lọc theo tên
        const matchesFilter = product.id.toLowerCase().includes(filterInput); // Lọc theo mã
        return matchesSearch && matchesFilter; // Trả về sản phẩm nếu khớp cả hai điều kiện
    });

    filteredProducts.forEach(product => {
        productTableBody.innerHTML += createProductRow(product); // Tạo hàng cho sản phẩm đã lọc
    });

    // Nếu không tìm thấy sản phẩm nào, bạn có thể hiển thị thông báo
    if (filteredProducts.length === 0) {
        productTableBody.innerHTML = '<tr><td colspan="8">Không tìm thấy sản phẩm nào.</td></tr>';
    }
});

// Thêm sự kiện lắng nghe cho nút "Nhập lại"
document.getElementById('reset-button').addEventListener('click', function() {
    document.getElementById('search-input').value = ''; // Xóa ô tìm kiếm
    document.getElementById('filter-input').value = ''; // Xóa ô lọc
    renderProducts(currentPage); // Hiển thị lại tất cả sản phẩm
});


document.getElementById('reset-button').addEventListener('click', function() {
    document.getElementById('search-input').value = ''; // Xóa giá trị tìm kiếm
    renderProducts(currentPage); // Khôi phục lại bảng sản phẩm ban đầu
});


      
  </script>
  
    <script>
      function validateForm() {
          const fileInput = document.getElementById('product-image');
          if (fileInput.files.length > 2) {
              alert('Bạn chỉ được chọn tối đa 2 hình ảnh.');
              return false;
          }
          return true;
      }
  </script>
  
  
  
  

    <!--=============== MAIN JS ===============-->
    <script src="assets/js/main.js"></script>
</body>
</html>
